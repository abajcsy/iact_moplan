# iact_moplan

Motion planning and control functionality for the InterACT Lab. This code is primarily used for the JACO2 7DOF robotic arm and implements the basic functionality of:
* ROS interface to read joint positions and sensor messages and command joint velocities
* OpenRAVE simulation and forward/inverse kinematics 
* Trajectory planning from a start to a goal configuration 
* PID control around a pre-planned trajectory

## Dependencies
* Ubuntu 14.04, ROS Indigo, OpenRAVE, Python 2.7
* or_trajopt, or_urdf, or_rviz, prpy, pr_ordata
* kinova-ros
* fcl

## Running the demo in the OpenRAVE simulator
Clone the repository into your workspace
```
cd /catkin_ws/src/
git clone https://github.com/abajcsy/iact_moplan.git
cd iact_moplan/src/
```
Run the demo in simulation. The robot should move from a start configuration to a goal configuration with a plan generated by TrajoptPlanner in the OpenRAVE simulator.
```
python run.py
```

## Running the demo on the JACO2 Robot
Plug in the robot via USB to your machine. Turn the robot on and put it in home position by pressing and holding the center (yellow) button on the joystick.

In a new terminal, turn on the Kinova API by typing:
```
roslaunch kinova_bringup kinova_robot.launch kinova_robotType:=j2s7s300 use_urdf:=true
```

 Open the ```run.py``` file and change ```sim_flag = False```. Save the file. Open a new terminal. From the subfolder ```/iact_moplan/src/``` type
 ```
 python run.py
 ```
 
 You should see the real robot follow the same path that it did in simulation!
 
